!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.sd={})}(this,function(t){"use strict";function e(t){this.id=t.id,this.name=t.name,this.parent=-1,this.children=[],this.x=0,this.y=0,this.height=a,this.width=this.name.length*h+2*l,this.fold=!0}function n(t,n){var i=new Map;return t.forEach(function(t){t.name=t.name+":"+t.type;var n=new e(t);i.set(n.id,n)}),n.forEach(function(t){var n=new e(t);n.children=t.objs,i.set(n.id,n)}),n.forEach(function(e){t=e.objs;for(var n=0;n<t.length;n++){i.get(t[n]).parent=e.id}}),i}function i(t,e){c=n(t,e),c.forEach(function(t,e,n){-1==t.parent&&f.push(t)}),f.sort(function(t,e){var n=t.id,i=e.id;return t.isGroup()&&(n=t.children[0]),e.isGroup()&&(i=e.children[0]),n-i});for(var i=l,r=0;r<f.length;r++)f[r].x=i,i+=f[r].width+l;this.total=c,this.display=f}function r(t){var e=d3.select("svg").append("g"),n=e.append("rect").attr({x:0,y:0,width:t.width,height:t.height}).style("stroke","black");return t.isGroup()?n.style("fill","yellow"):n.style("fill","white"),e.append("text").text(function(e){return t.name}).attr("transform","translate("+t.width/2+","+(t.height/2+s)+")").attr("text-anchor","middle"),e.attr("class","element-rectangle").datum(t).attr("transform","translate("+t.x+", "+t.y+")"),e}function o(t){var e=c.get(t);if(e.fold){for(var n=e.children,i=d,r=f.indexOf(e)+1,o=0;o<n.length;o++){var a=c.get(n[o]);a.x=i+e.x,f.splice(r,0,a),i+=a.width+l}e.width=i-l+d,e.y-=d,e.height+=2*d,e.fold=!1}}var a=40,h=10,s=4,l=20,d=10;e.prototype.isGroup=function(){return 0!=this.children.length};var c=[],f=[];i.prototype.drawAll=function(){f.forEach(function(t){var e=r(t);t.isGroup()&&e.on("click",function(t){t.fold&&(o(t.id),d3.selectAll(".element-rectangle").each(function(e){t==e&&d3.select(this).transition().attr({width:t.width,height:t.height}).attr("transform","translate("+t.x+", "+t.y+")")}),t.children.forEach(function(t){r(c.get(t))}))})})},t.DisplayElements=i,Object.defineProperty(t,"__esModule",{value:!0})});